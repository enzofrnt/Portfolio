<h1>Formulaire de contact</h1>

<div class="container py-4">
  <form [formGroup]="contactForm" (ngSubmit)="onSubmit()"
    class="needs-validation">
    <div class="mb-3">
      <label for="name" class="form-label">Nom</label>
      <input
        type="text"
        class="form-control"
        id="name"
        formControlName="name"
        [class.is-invalid]="contactForm.get('name')?.invalid && contactForm.get('name')?.touched">
      <div class="invalid-feedback">
        Veuillez entrer votre nom
      </div>
    </div>

    <div class="mb-3">
      <label for="email" class="form-label">Email</label>
      <input
        type="email"
        class="form-control"
        id="email"
        formControlName="email"
        [class.is-invalid]="contactForm.get('email')?.invalid && contactForm.get('email')?.touched">
      <div class="invalid-feedback">
        Veuillez entrer une adresse email valide
      </div>
    </div>

    <div class="mb-3">
      <label for="message" class="form-label">Message</label>
      <textarea
        class="form-control"
        id="message"
        rows="5"
        formControlName="message"
        [class.is-invalid]="contactForm.get('message')?.invalid && contactForm.get('message')?.touched"></textarea>
      <div class="invalid-feedback">
        Veuillez entrer votre message
      </div>
    </div>

    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="contactForm.invalid || isSubmitting">
      <span
        class="spinner-border spinner-border-sm me-2"
        *ngIf="isSubmitting">
      </span>
      {{ isSubmitting ? 'Envoi en cours...' : 'Envoyer' }}
    </button>

    <div class="alert alert-success mt-3" *ngIf="submitSuccess">
      Message envoyé avec succès !
    </div>

    <div class="alert alert-danger mt-3" *ngIf="submitError">
      Une erreur est survenue lors de l'envoi du message.
    </div>
  </form>
</div>
